@layout AuthLayout
@page "/auth/register"
@inject IAuthenticationManager _authenticationManager

<EditForm Model="Model" OnValidSubmit="SubmitAsync">

    <DataAnnotationsValidator />
    
    <MudText Typo="Typo.h4"
             GutterBottom="true">
        Sign Up
    </MudText>

    <MudText>
        Already have an account? <MudLink Href="/auth/login">Login</MudLink>
    </MudText>

    <MudTextField Label="User name"
                  @bind-Value="Model.UserName"
                  For="@(() => Model.UserName)"
                  Variant="Variant.Outlined"
                  Class="my-6" />

    <MudTextField Label="Email Address"
                  @bind-Value="Model.Email"
                  For="@(() => Model.Email)"
                  Variant="Variant.Outlined"
                  Class="my-6" />

    <MudTextField InputType="@_passwordInput" 
                  Label="Password"
                  @bind-Value="Model.Password"
                  For="@(() => Model.Password)"
                  Variant="Variant.Outlined"
                  Adornment="Adornment.End"
                  AdornmentIcon="@_passwordInputIcon"
                  OnAdornmentClick="TogglePasswordVisibility"
                  Class="my-6" />

    <MudTextField InputType="@_passwordInput" 
                  Label="Confirm Password"
                  @bind-Value="Model.PasswordConfirmation"
                  For="@(() => Model.PasswordConfirmation)"
                  Variant="Variant.Outlined"
                  Adornment="Adornment.End"
                  AdornmentIcon="@_passwordInputIcon"
                  OnAdornmentClick="TogglePasswordVisibility"
                  Class="my-6" />

    <MudButton ButtonType="ButtonType.Submit" 
               Variant="Variant.Filled"
               Color="Color.Primary"
               Size="Size.Large"
               Disabled = "_processing"
               FullWidth="true">
        @if(_processing)
        {
            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
            <MudText Class="ms-2">Processing</MudText>
        }
        else
        {
            <MudText>
                Sign Up
            </MudText>
        }
    </MudButton>
</EditForm>
